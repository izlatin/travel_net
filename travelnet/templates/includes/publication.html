{% load thumbnail %}
{% load static %}

<div class="container-lg publication">
    <div class="post-header">
        {% thumbnail post.author.image "50x50" crop="center" as im %}
            <img src="{{ im.url }}" width="{{ im.width }}" height="{{ im.height }}"
                 alt="{{ post.author }}'s profile picture">
        {% endthumbnail %}
        <span>{{ post.author }}</span>
        <p class="text-muted">Опубликованно {{ post.datetime_created }}</p>
    </div>

    <div class="post-main">
        <span value="{{ post.id }}" hidden></span>
        <p class="">{{ post.text }}</p>
        {# TODO: add map #}
    </div>

    <div class="post-footer">
        <div class="likes" id="likes">
            <span class="like_count" id="like_count">{{ post.publicationlike_set.count }}</span>
            <span {% if user.is_authenticated %}id="like_button" class="like_button"{% endif %}>
                <img
                        data-src-other="{% if user.id not in post.publicationlike_set.users_liked_list %}{% static 'img/other/liked.png' %}{% else %}{% static 'img/other/unliked.png' %}{% endif %}"
                        data-is-liked="{% if user.id in post.publicationlike_set.users_liked_list %}1{% else %}0{% endif %}"
                        data-id="{{ post.id }}"
                        src="{% if user.id in post.publicationlike_set.users_liked_list %}{% static 'img/other/liked.png' %}{% else %}{% static 'img/other/unliked.png' %}{% endif %}"
                        width="25" alt="post unliked"
                >
            </span>
        </div>
        <div class="comments">
            {% for comment in post.comment_set.all %}
                <div class="comment">
                    <p>коммент от {{ comment.author }}</p>
                    <p>Текст: {{ comment.text }}</p>
                </div>
                {% empty %}
                <p class="text-muted">оп, еще никто не оставлял комментарии здесь..</p>
            {% endfor %}
        </div>
    </div>

</div>
<hr>

